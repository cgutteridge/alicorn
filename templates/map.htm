<check if='{{ @resource->has("geo:lat") && @resource->has("geo:long") }}'>
  <script src="http://openlayers.org/api/OpenLayers.js"></script>
  <div class="map" style="border:solid 1px #ccc;width:300px; height:300px; margin-bottom:1em" id="map"></div>
  <script>
var map = new OpenLayers.Map("map");
var wms = new OpenLayers.Layer.OSM();
map.addLayer(wms);

var lonLat = new OpenLayers.LonLat( {{@resource->get("geo:long")}}, {{@resource->get("geo:lat")}} )
         .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            map.getProjectionObject() // to Spherical Mercator Projection
          );
 
var zoom = 9;

var markers = new OpenLayers.Layer.Markers( "Markers" );
map.addLayer(markers);
markers.addMarker(new OpenLayers.Marker(lonLat));
map.setCenter( lonLat, zoom );
  </script>
</check>
